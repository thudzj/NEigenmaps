NCCL_SOCKET_IFNAME=enp33s0f1 python main.py --dist-url tcp://172.18.1.76 --world-size 2 --rank 0 --checkpoint-dir ../logs  --batch-size 3840 --name neuralef-2048_128-alpha25 --dist-port 8872 --mode neuralef --kernel 1 --opt lars --learning-rate 4.5 --alpha 25
    python linear_probe.py --pretrained ../logs/neuralef-2048_128-alpha25/final.pth


main.py --dist-url tcp://172.18.1.76 --world-size 2 --rank 0 --checkpoint-dir ../logs --batch-size 3840 --name neuralef-k4-2lbn-lars4.5-alpha100 --dist-port 8872 --mode neuralef --kernel 4 --opt lars --learning-rate 4.5 --alpha 100 --proj_dim 2048 128 --proj_bn

main.py --dist-url tcp://172.18.1.76 --world-size 2 --rank 0 --checkpoint-dir ../logs --batch-size 3840 --name neuralef-k4-5lbn-lars4.5-alpha100 --dist-port 8872 --mode neuralef --kernel 4 --opt lars --learning-rate 4.5 --alpha 100 --proj_dim 1024 512 256 128 --proj_bn


NCCL_SOCKET_IFNAME=enp33s0f1 python main.py --dist-url tcp://172.18.1.76 --world-size 2 --rank 0 --checkpoint-dir ../logs  --batch-size 3840 --name neuralef-k4-5lbn-lars4.5-alpha100-200e --dist-port 8872 --mode neuralef --kernel 4 --opt lars --learning-rate 4.5 --alpha 100 --proj_dim 1024 512 256 128 --proj_bn --epochs 200


NCCL_SOCKET_IFNAME=enp33s0f1 python main.py --dist-url tcp://172.18.1.76 --world-size 2 --rank 0 --checkpoint-dir ../logs  --batch-size 3840 --name neuralef-k4-3lbn-lars4.5-alpha100 --dist-port 8872 --mode neuralef --kernel 4 --opt lars --learning-rate 4.5 --alpha 100 --proj_dim 2048 512 128 --proj_bn --epochs 200


NCCL_SOCKET_IFNAME=enp33s0f1 python main.py --dist-url tcp://172.18.1.76 --world-size 2 --rank 0 --checkpoint-dir ../logs  --batch-size 3840 --name neuralef-k4-3lbn-o512-lars4.5-alpha5 --dist-port 8872 --mode neuralef --kernel 4 --opt lars --learning-rate 4.5 --alpha 5 --proj_dim 2048 512 512 --proj_bn --epochs 200


NCCL_SOCKET_IFNAME=enp33s0f1 python main.py --dist-url tcp://172.18.1.76 --world-size 2 --rank 0 --checkpoint-dir ../logs  --batch-size 3840 --name neuralef-k4-3lbn-o1024-lars4.5 --dist-port 8872 --mode neuralef --kernel 4 --opt lars --learning-rate 4.5 --alpha 2 --proj_dim 2048 1024 1024 --proj_bn --epochs 200


NCCL_SOCKET_IFNAME=enp33s0f1 python main.py --dist-url tcp://172.18.1.76 --world-size 2 --rank 0 --checkpoint-dir ../logs  --batch-size 3840 --name neuralef-k4-3lbn-h4096-o512-lars4.5-alpha5 --dist-port 8872 --mode neuralef --kernel 4 --opt lars --learning-rate 4.5 --alpha 5 --proj_dim 2048 4096 512 --proj_bn --epochs 200


NCCL_SOCKET_IFNAME=ibs8 python main.py --dist-url tcp://10.2.1.47 --world-size 2 --rank 0 --checkpoint-dir ../logs  --batch-size 3840 --name neuralef-k4-3lbn-h4096-o512-lars4.5-alpha5-fixedt --dist-port 8872 --mode neuralef --kernel 4 --opt lars --learning-rate 4.5 --alpha 5 --proj_dim 2048 4096 512 --proj_bn --epochs 200


NCCL_SOCKET_IFNAME=ibs8 python main.py --dist-url tcp://10.2.1.47 --world-size 2 --rank 0 --checkpoint-dir ../logs  --batch-size 3840 --name neuralef-t-lars4.5-alpha1 --dist-port 8872 --mode neuralef --opt lars --learning-rate 4.5 --alpha 100 --proj_dim 2048 128 --proj_bn




python main.py --checkpoint-dir ./logs --batch-size 1920 --name simclr --dist-port 8872 --mode simclr --opt lars --learning-rate 2.25
    {"epoch": 99, "acc1": 63.474, "acc5": 85.67, "best_acc1": 63.5, "best_acc5": 85.74}

CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 2048 --name simclr-o-bs2048 --dist-port 8872 --mode simclr --learning-rate 2.4; CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7 python linear_probe.py --pretrained logs/simclr-o-bs2048/final.pth
    0.1 cos {"epoch": 99, "acc1": 63.978, "acc5": 85.976, "best_acc1": 63.998, "best_acc5": 86.008}
    0.3 cos {"epoch": 99, "acc1": 64.616, "acc5": 86.254, "best_acc1": 64.642, "best_acc5": 86.308}
    0.1 {"epoch": 99, "acc1": 64.032, "acc5": 86.128, "best_acc1": 64.052, "best_acc5": 86.128}

    python main.py --checkpoint-dir ./logs --batch-size 1920 --name simclr-o --dist-port 8872 --mode simclr --learning-rate 2.25
    {"epoch": 98, "acc1": 64.022, "acc5": 85.936, "best_acc1": 64.05, "best_acc5": 85.968}

    CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 1024 --name simclr-o-bs1024 --dist-port 8872 --mode simclr --learning-rate 1.2; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/simclr-o-bs1024/final.pth
    {"epoch": 99, "acc1": 62.962, "acc5": 85.08, "best_acc1": 62.998, "best_acc5": 85.1}

    CUDA_VISIBLE_DEVICES=0,1,2,3 python main.py --checkpoint-dir ./logs --batch-size 512 --name simclr-o-bs512 --dist-port 8873 --mode simclr --learning-rate 0.6; CUDA_VISIBLE_DEVICES=0,1,2,3 python linear_probe.py --pretrained logs/simclr-o-bs512/final.pth
    {"epoch": 99, "acc1": 61.068, "acc5": 83.722, "best_acc1": 61.136, "best_acc5": 83.78}

    CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 256 --name simclr-o-bs256 --dist-port 8874 --mode simclr --learning-rate 0.3; CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7 python linear_probe.py --pretrained logs/simclr-o-bs256/final.pth
    {"epoch": 99, "acc1": 59.25, "acc5": 82.218, "best_acc1": 59.272, "best_acc5": 82.28}

    CUDA_VISIBLE_DEVICES=2,3,4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 2046 --name simclr-o-bs2046-o4096 --dist-port 8872 --mode simclr --learning-rate 2.4 --proj_dim 2048 4096; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/simclr-o-bs2046-o4096/final.pth --lr-classifier 0.3
        {"epoch": 98, "acc1": 64.962, "acc5": 86.388, "best_acc1": 64.964, "best_acc5": 86.45}

    CUDA_VISIBLE_DEVICES=2,3,4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 1794 --name simclr-o-bs1792-8192 --dist-port 8872 --mode simclr --learning-rate 2.1 --proj_dim 2048 8192; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/simclr-o-bs1792-8192/final.pth --lr-classifier 0.3
        {"epoch": 99, "acc1": 64.74, "acc5": 86.268, "best_acc1": 64.758, "best_acc5": 86.27}


python main.py --checkpoint-dir ./logs --batch-size 1920 --name neuralef-P-t10 --dist-port 8872 --mode neuralef --opt lars --learning-rate 2.25 --alpha 0.01 --proj_dim 2048 4096
    {"epoch": 98, "acc1": 65.34, "acc5": 86.102, "best_acc1": 65.364, "best_acc5": 86.162}


CUDA_VISIBLE_DEVICES=2,3,4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 2046 --name neuralef-P-t10-o-bs2046 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 4096; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/neuralef-P-t10-o-bs2046/final.pth
    0.1 cos {"epoch": 99, "acc1": 66.146, "acc5": 86.626, "best_acc1": 66.196, "best_acc5": 86.642}
    0.3 cos {"epoch": 98, "acc1": 65.984, "acc5": 86.444, "best_acc1": 65.988, "best_acc5": 86.444}
    0.1 xxx

    CUDA_VISIBLE_DEVICES=2,3,4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 1920 --name neuralef-P-t10-o --dist-port 8872 --mode neuralef --learning-rate 2.25 --alpha 0.01 --proj_dim 2048 4096; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/neuralef-P-t10-o/final.pth
    {"epoch": 99, "acc1": 66.156, "acc5": 86.688, "best_acc1": 66.212, "best_acc5": 86.696}

    CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 1024 --name neuralef-P-t10-o-bs1024 --dist-port 8872 --mode neuralef --learning-rate 1.2 --alpha 0.01 --proj_dim 2048 4096; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/neuralef-P-t10-o-bs1024/final.pth
    {"'epoch": 99, "acc1": 64.698, "acc5": 85.898. "best acc1": 64.73, "best acc5": 85.924}

    CUDA_VISIBLE_DEVICES=2,3 python main.py --checkpoint-dir ./logs --batch-size 512 --name neuralef-P-t10-o-bs512 --dist-port 8873 --mode neuralef --learning-rate 0.6 --alpha 0.01 --proj_dim 2048 4096; CUDA_VISIBLE_DEVICES=2,3 python linear_probe.py --pretrained logs/neuralef-P-t10-o-bs512/final.pth
    {"epoch": 99, "acc1": 61.708, "acc5": 84.08, "best_acc1": 61.728, "best_acc5": 84.13}

    CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 256 --name neuralef-P-t10-o-bs256 --dist-port 8874 --mode neuralef --learning-rate 0.3 --alpha 0.005 --proj_dim 2048 4096; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/neuralef-P-t10-o-bs256/final.pth
    {"epoch": 99, "acc1": 60.29, "acc5": 82.85, "best_acc1": 60.346, "best_acc5": 82.938}

    python main.py --checkpoint-dir ./logs --batch-size 1920 --name neuralef-P-t10-o-sepbn --dist-port 8872 --mode neuralef --learning-rate 2.25 --alpha 0.01 --proj_dim 2048 4096; python linear_probe.py --pretrained logs/neuralef-P-t10-o-sepbn/final.pth --lr-classifier 0.3
    {"epoch": 99, "acc1": 64.674, "acc5": 85.734, "best_acc1": 64.7, "best_acc5": 85.758}

    python main.py --checkpoint-dir ./logs --batch-size 1792 --name neuralef-P-t10-o-bs1792-8192 --dist-port 8872 --mode neuralef --learning-rate 2.1 --alpha 0.01 --proj_dim 2048 8192; python linear_probe.py --pretrained logs/neuralef-P-t10-o-bs1792-8192/final.pth --lr-classifier 0.3
    {"epoch": 99, "acc1": 64.874, "acc5": 86.008, "best_acc1": 64.876, "best_acc5": 86.036}

    python main.py --checkpoint-dir ./logs --batch-size 1920 --name neuralef-P-t10-o-2 --dist-port 8872 --mode neuralef --learning-rate 2.25 --alpha 0.01 --proj_dim 2048 4096; python linear_probe.py --pretrained logs/neuralef-P-t10-o-2/final.pth
    {"epoch": 99, "acc1": 66.046, "acc5": 86.59, "best_acc1": 66.046, "best_acc5": 86.634}

    python main.py --checkpoint-dir ./logs --batch-size 1920 --name neuralef-P-t10-o-o2048 --dist-port 8872 --mode neuralef --learning-rate 2.25 --alpha 0.01 --proj_dim 2048 2048; python linear_probe.py --pretrained logs/neuralef-P-t10-o-o2048/final.pth  --lr-classifier 0.3
    {"epoch": 99, "acc1": 65.982, "acc5": 86.51, "best_acc1": 66.04, "best_acc5": 86.55}

    python main.py --checkpoint-dir ./logs --batch-size 3072 --name neuralef-P-t10-o-bs3072 --dist-port 8872 --mode neuralef --learning-rate 3.6 --alpha 0.01 --proj_dim 2048 4096; python linear_probe.py --pretrained logs/neuralef-P-t10-o-bs3072/final.pth  --lr-classifier 0.3
    {"epoch": 99, "acc1": 64.588, "acc5": 85.868, "best_acc1": 64.632, "best_acc5": 85.88}


python main.py --checkpoint-dir ./logs --batch-size 1920 --name neuralef-Q-t10-o --dist-port 8872 --mode neuralef --learning-rate 2.25 --alpha 0.025 --proj_dim 2048 2048; python linear_probe.py --pretrained logs/neuralef-Q-t10-o/final.pth
    {"epoch": 99, "acc1": 65.824, "acc5": 86.46, "best_acc1": 65.848, "best_acc5": 86.48}

CUDA_VISIBLE_DEVICES=2,3,4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 2046 --name bt-bs2046 --dist-port 8872 --mode bt --learning-rate 1.6 --alpha 0.0051 --proj_dim 2048 4096 --scale-loss 0.024; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/bt-bs2046/final.pth
    0.1 cos {"epoch": 99, "acc1": 60.984, "acc5": 83.608, "best_acc1": 60.99, "best_acc5": 83.62}
    0.3 cos {"epoch": 99, "acc1": 62.218, "acc5": 84.378, "best_acc1": 62.242, "best_acc5": 84.4}
    0.1 {"epoch": 99, "acc1": 61.694, "acc5": 84.166, "best_acc1": 61.694, "best_acc5": 84.166}

    CUDA_VISIBLE_DEVICES=2,3,4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 2046 --name bt-bs2046-lr.3 --dist-port 8872 --mode bt --learning-rate 2.4 --alpha 0.0051 --proj_dim 2048 4096 --scale-loss 0.024; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/bt-bs2046-lr.3/final.pth --lr-classifier 0.3
        {"epoch": 99, "acc1": 63.596, "acc5": 85.236, "best_acc1": 63.616, "best_acc5": 85.25}

    CUDA_VISIBLE_DEVICES=2,3,4,5,6,7 python main.py --checkpoint-dir ./logs --batch-size 1794 --name bt-bs1792-lr.3-8192 --dist-port 8872 --mode bt --learning-rate 2.1 --alpha 0.0051 --proj_dim 2048 8192 --scale-loss 0.024; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/bt-bs1792-lr.3-8192/final.pth --lr-classifier 0.3
    {"epoch": 99, "acc1": 64.03, "acc5": 85.706, "best_acc1": 64.07, "best_acc5": 85.706}



---------------


python main.py --batch-size 2048 --name neuralef-bs2048 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048; python linear_probe.py --pretrained logs/neuralef-bs2048/final.pth
    {"epoch": 99, "acc1": 66.298, "acc5": 86.604, "best_acc1": 66.318, "best_acc5": 86.648}

    python main.py --batch-size 2048 --name neuralef-nosg-bs2048 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad; python linear_probe.py --pretrained logs/neuralef-nosg-bs2048/final.pth
    {"epoch": 99, "acc1": 66.792, "acc5": 87.214, "best_acc1": 66.836, "best_acc5": 87.252}

    python main.py --batch-size 2048 --name neuralef-l2n-bs2048 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --l2_normalize; python linear_probe.py --pretrained logs/neuralef-l2n-bs2048/final.pth
    fail to converge

    python main.py --batch-size 2048 --name neuralef-nosg-bs2048-new --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad; python linear_probe.py --pretrained logs/neuralef-nosg-bs2048-new/final.pth (without balancing hyperparameter)
    not good

    python main.py --batch-size 2048 --name neuralef-nosg-nolbn-bs2048 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_last_bn; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-bs2048/final.pth
    {"epoch": 99, "acc1": 66.806, "acc5": 87.148, "best_acc1": 66.82, "best_acc5": 87.154}
        python main.py --batch-size 2048 --name neuralef-nolbn-pos-bs2048 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --no_last_bn --positive_def; python linear_probe.py --pretrained logs/neuralef-nolbn-pos-bs2048/final.pth
        todo

    python main.py --batch-size 2048 --name neuralef-nosg-nolbn-notto-bs2048 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_last_bn --not_all_together; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-notto-bs2048/final.pth
    {"epoch": 99, "acc1": 64.578, "acc5": 85.91, "best_acc1": 64.608, "best_acc5": 85.954}

    python main.py --batch-size 2048 --name neuralef-nosg-nolbn-bs2048-e200 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_last_bn --epochs 200; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-bs2048-e200/final.pth
    {"epoch": 99, "acc1": 69.386, "acc5": 88.724, "best_acc1": 69.424, "best_acc5": 88.744}

    CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --batch-size 1024 --name neuralef-nosg-nolbn-bs1024 --dist-port 8872 --mode neuralef --learning-rate 1.2 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_last_bn; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-bs1024/final.pth
    {"epoch": 99, "acc1": 65.682, "acc5": 86.584, "best_acc1": 65.722, "best_acc5": 86.632}

        python main.py --batch-size 1024 --name neuralef-nolbn-pos-bs1024 --dist-port 8873 --mode neuralef --learning-rate 1.2 --alpha 0.01 --proj_dim 2048 2048 --no_last_bn --positive_def; python linear_probe.py --pretrained logs/neuralef-nolbn-pos-bs1024/final.pth
        todo

        nohup python main.py --batch-size 1024 --name neuralef-nosg-nolbn-pos-bs1024 --dist-port 8873 --mode neuralef --learning-rate 1.2 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_last_bn --positive_def > output_neuralef-nosg-nolbn-pos-bs1024.txt; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-pos-bs1024/final.pth
        todo

    CUDA_VISIBLE_DEVICES=0,1,2,3 python main.py --batch-size 512 --name neuralef-nosg-nolbn-bs512 --dist-port 8873 --mode neuralef --learning-rate 0.6 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_last_bn; CUDA_VISIBLE_DEVICES=0,1,2,3 python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-bs512/final.pth
    {"epoch": 99, "acc1": 63.25, "acc5": 85.364, "best_acc1": 63.326, "best_acc5": 85.4}

        CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --batch-size 512 --name neuralef-nolbn-pos-bs512 --dist-port 8873 --mode neuralef --learning-rate 0.6 --alpha 0.01 --proj_dim 2048 2048 --no_last_bn --positive_def; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/neuralef-nolbn-pos-bs512/final.pth
        todo

        CUDA_VISIBLE_DEVICES=4,5,6,7 nohup python main.py --batch-size 512 --name neuralef-nosg-nolbn-pos-bs512 --dist-port 8873 --mode neuralef --learning-rate 0.6 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_last_bn --positive_def  > output_neuralef-nosg-nolbn-pos-bs512.txt; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-pos-bs512/final.pth
        todo

    CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --batch-size 256 --name neuralef-nosg-nolbn-bs256 --dist-port 8873 --mode neuralef --learning-rate 0.3 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_last_bn; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-bs256/final.pth
    {"epoch": 99, "acc1": 60.496, "acc5": 83.076, "best_acc1": 60.524, "best_acc5": 83.096}

    srun python main.py --world-size $WORLD_SIZE --batch-size 4096 --name neuralef-nosg-nolbn-bs4096 --mode neuralef --learning-rate 3.2 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_last_bn (tuned lr)
    {"epoch": 99, "acc1": 65.178, "acc5": 86.15, "best_acc1": 65.242, "best_acc5": 86.236}

    python main.py --batch-size 2048 --name neuralef-nosg-nolbn-o4096 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.005 --proj_dim 4096 4096 --no_stop_grad --no_last_bn; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-o4096/final.pth
    {"epoch": 99, "acc1": 67.716, "acc5": 87.838, "best_acc1": 67.75, "best_acc5": 87.864}

        python main.py --batch-size 2050 --name neuralef-nolbn-o4096 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.005 --proj_dim 4096 4096 --no_last_bn --data /workspace/home/fanbao/datasets/ImageNet; CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7 python linear_probe.py --pretrained logs/neuralef-nolbn-o4096/final.pth --data /workspace/home/fanbao/datasets/ImageNet

    python main.py --batch-size 2048 --name neuralef-nosg-nolbn-o8192 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.0025 --proj_dim 8192 8192 --no_stop_grad --no_last_bn; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-o8192/final.pth
    {"epoch": 99, "acc1": 68.42, "acc5": 88.128, "best_acc1": 68.422, "best_acc5": 88.128}
        python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-o8192/final.pth --train-percent 10
          {"epoch": 99, "acc1": 60.204, "acc5": 82.958, "best_acc1": 60.252, "best_acc5": 82.998}
        python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-o8192/final.pth --train-percent 1
          {"epoch": 99, "acc1": 45.758, "acc5": 71.588, "best_acc1": 45.77, "best_acc5": 71.722}

      python main.py --batch-size 2050 --name neuralef-nolbn-o8192 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.0025 --proj_dim 8192 8192 --no_last_bn --data /workspace/home/fanbao/datasets/ImageNet; CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7 python linear_probe.py --pretrained logs/neuralef-nolbn-o8192/final.pth --data /workspace/home/fanbao/datasets/ImageNet
        g41
        {"epoch": 99, "acc1": 67.572, "acc5": 87.412, "best_acc1": 67.592, "best_acc5": 87.462}

    python main.py --batch-size 2032 --name neuralef-nosg-nolbn-1lp-bs2048 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 --no_stop_grad --no_last_bn; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-1lp-bs2048/final.pth
    not converge

    python main.py --batch-size 2000 --name neuralef-nosg-nobn-bs2048 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --no_stop_grad --no_proj_bn; python linear_probe.py --pretrained logs/neuralef-nosg-nobn-bs2048/final.pth
    not converge

    python main.py --batch-size 2032 --name neuralef-nosg-0lp-bs2048 --dist-port 8872 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 0 --no_stop_grad --no_last_bn; python linear_probe.py --pretrained logs/neuralef-nosg-0lp-bs2048/final.pth
    not converge

    python main.py --batch-size 2048 --name neuralef-nosg-nolbn-o8192-e200 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.0025 --proj_dim 8192 8192 --no_stop_grad --no_last_bn  --epochs 200; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-o8192-e200/final.pth
    {"epoch": 99, "acc1": 70.268, "acc5": 89.332, "best_acc1": 70.292, "best_acc5": 89.374}

    python main.py --batch-size 2048 --name neuralef-nosg-nolbn-o8192-e400 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.0025 --proj_dim 8192 8192 --no_stop_grad --no_last_bn  --epochs 400; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-o8192-e400/final.pth
    {"epoch": 99, "acc1": 71.472, "acc5": 89.878, "best_acc1": 71.516, "best_acc5": 89.932}
        python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-o8192-e400/final.pth --train-percent 10
          {"epoch": 99, "acc1": 64.422, "acc5": 85.208, "best_acc1": 64.46, "best_acc5": 85.544}
        python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-o8192-e400/final.pth --train-percent 1
          {"epoch": 99, "acc1": 52.442, "acc5": 76.378, "best_acc1": 52.468, "best_acc5": 76.686}

    python main.py --batch-size 2048 --name neuralef-nosg-nolbn-o8192-e1000 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.0025 --proj_dim 8192 8192 --no_stop_grad --no_last_bn  --epochs 1000; python linear_probe.py --pretrained logs/neuralef-nosg-nolbn-o8192-e1000/final.pth

python main.py --batch-size 2032 --name simclr-bs2048 --dist-port 8872 --mode simclr --learning-rate 2.4 --proj_dim 2048 2048; python linear_probe.py --pretrained logs/simclr-bs2048/final.pth
    {"epoch": 99, "acc1": 64.29, "acc5": 86.124, "best_acc1": 64.3, "best_acc5": 86.162}
    --lr-classifier 0.3 {"epoch": 99, "acc1": 65.06, "acc5": 86.438, "best_acc1": 65.062, "best_acc5": 86.482}

    CUDA_VISIBLE_DEVICES=0,1,2,3 python main.py --batch-size 1024 --name simclr-bs1024 --dist-port 8872 --mode simclr --learning-rate 1.2 --proj_dim 2048 2048; CUDA_VISIBLE_DEVICES=0,1,2,3 python linear_probe.py --pretrained logs/simclr-bs1024/final.pth
    {"epoch": 99, "acc1": 62.994, "acc5": 85.144, "best_acc1": 63.01, "best_acc5": 85.176}

    CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --batch-size 512 --name simclr-bs512 --dist-port 8873 --mode simclr --learning-rate 0.6 --proj_dim 2048 2048; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/simclr-bs512/final.pth
    {"epoch": 99, "acc1": 61.214, "acc5": 83.836, "best_acc1": 61.254, "best_acc5": 83.866}

    CUDA_VISIBLE_DEVICES=0,1,2,3 python main.py --batch-size 256 --name simclr-bs256 --dist-port 8872 --mode simclr --learning-rate 0.3 --proj_dim 2048 2048; CUDA_VISIBLE_DEVICES=0,1,2,3 python linear_probe.py --pretrained logs/simclr-bs256/final.pth
    {"epoch": 99, "acc1": 59.004, "acc5": 82.226, "best_acc1": 59.05, "best_acc5": 82.296}

    srun python main.py --world-size $WORLD_SIZE --batch-size 4096 --name simclr-bs4096 --mode simclr --learning-rate 4.8 --proj_dim 2048 2048
    {"epoch": 99, "acc1": 65.188, "acc5": 86.676, "best_acc1": 65.296, "best_acc5": 86.718}

    python main.py --batch-size 2000 --name simclr-o4096 --dist-port 8872 --mode simclr --learning-rate 2.4 --proj_dim 4096 4096; python linear_probe.py --pretrained logs/simclr-o4096/final.pth
    {"epoch": 99, "acc1": 65.108, "acc5": 86.582, "best_acc1": 65.116, "best_acc5": 86.606}

    python main.py --batch-size 2048 --name simclr-o8192 --dist-port 8872 --mode simclr --learning-rate 2.4 --proj_dim 8192 8192; python linear_probe.py --pretrained logs/simclr-o8192/final.pth
    {"epoch": 99, "acc1": 65.302, "acc5": 86.824, "best_acc1": 65.396, "best_acc5": 86.854}

python main.py --batch-size 2000 --name bt-bs2048 --dist-port 8872 --mode bt --learning-rate 2.4 --alpha 0.0051 --proj_dim 2048 2048 --scale-loss 0.024; python linear_probe.py --pretrained logs/bt-bs2048/final.pth
    {"epoch": 99, "acc1": 59.216, "acc5": 82.266, "best_acc1": 59.22, "best_acc5": 82.274}
    --lr-classifier 0.3 {"epoch": 99, "acc1": 61.244, "acc5": 83.552, "best_acc1": 61.256, "best_acc5": 83.6}

    python main.py --batch-size 2000 --name bt2-bs2048 --dist-port 8872 --mode bt --learning-rate 2.4 --alpha 0.0204 --proj_dim 2048 2048 --scale-loss 0.024; python linear_probe.py --pretrained logs/bt2-bs2048/final.pth
    {"epoch": 99, "acc1": 60.402, "acc5": 83.716, "best_acc1": 60.422, "best_acc5": 83.718}

    CUDA_VISIBLE_DEVICES=0,1,2,3 python main.py --batch-size 1024 --name bt-bs1024 --dist-port 8873 --mode bt --learning-rate 1.2 --alpha 0.0204 --proj_dim 2048 2048 --scale-loss 0.024; CUDA_VISIBLE_DEVICES=0,1,2,3 python linear_probe.py --pretrained logs/bt-bs1024/final.pth
    {"epoch": 99, "acc1": 61.778, "acc5": 84.57, "best_acc1": 61.794, "best_acc5": 84.614}

    CUDA_VISIBLE_DEVICES=0,1,2,3 python main.py --batch-size 512 --name bt-bs512 --dist-port 8872 --mode bt --learning-rate 0.6 --alpha 0.0204 --proj_dim 2048 2048 --scale-loss 0.024; CUDA_VISIBLE_DEVICES=0,1,2,3 python linear_probe.py --pretrained logs/bt-bs512/final.pth
    {"epoch": 99, "acc1": 60.346, "acc5": 83.67, "best_acc1": 60.368, "best_acc5": 83.688}

    CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --batch-size 256 --name bt-bs256 --dist-port 8873 --mode bt --learning-rate 0.3 --alpha 0.0204 --proj_dim 2048 2048 --scale-loss 0.024; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/bt-bs256/final.pth
    {"epoch": 99, "acc1": 57.572, "acc5": 81.704, "best_acc1": 57.586, "best_acc5": 81.754}

    srun python main.py --world-size $WORLD_SIZE --batch-size 4096 --name bt-bs4096 --mode bt --learning-rate 4.8 --alpha 0.0204 --proj_dim 2048 2048 --scale-loss 0.024
    {"epoch": 99, "acc1": 57.128, "acc5": 80.832, "best_acc1": 57.13, "best_acc5": 80.84}

    python main.py --batch-size 2000 --name bt-o4096 --dist-port 8872 --mode bt --learning-rate 2.4 --alpha 0.0102 --proj_dim 4096 4096 --scale-loss 0.024; python linear_probe.py --pretrained logs/bt-o4096/final.pth
    {"epoch": 99, "acc1": 63.852, "acc5": 85.7, "best_acc1": 63.866, "best_acc5": 85.744}

    python main.py --batch-size 2048 --name bt-o8192 --dist-port 8872 --mode bt --learning-rate 2.4 --alpha 0.0051 --proj_dim 8192 8192 --scale-loss 0.024; python linear_probe.py --pretrained logs/bt-o8192/final.pth
    {"epoch": 99, "acc1": 66.238, "acc5": 87.058, "best_acc1": 66.282, "best_acc5": 87.1}

python main.py --batch-size 2032 --name spectral-bs2048 --dist-port 8872 --mode spectral --learning-rate 2.4 --proj_dim 2048 2048; python linear_probe.py --pretrained logs/spectral-bs2048/final.pth
    {"epoch": 99, "acc1": 66.454, "acc5": 87.608, "best_acc1": 66.488, "best_acc5": 87.66}

    python main.py --batch-size 2032 --name spectral-bs2048-e200 --dist-port 8872 --mode spectral --learning-rate 2.4 --proj_dim 2048 2048 --epochs 200; python linear_probe.py --pretrained logs/spectral-bs2048-e200/final.pth
    {"epoch": 99, "acc1": 68.638, "acc5": 88.994, "best_acc1": 68.71, "best_acc5": 89.004}


    CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --batch-size 1024 --name spectral-bs1024 --dist-port 8873 --mode spectral --learning-rate 1.2 --proj_dim 2048 2048; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/spectral-bs1024/final.pth
    {"epoch": 99, "acc1": 65.638, "acc5": 87.02, "best_acc1": 65.658, "best_acc5": 87.032}

    CUDA_VISIBLE_DEVICES=0,1,2,3 python main.py --batch-size 512 --name spectral-bs512 --dist-port 8872 --mode spectral --learning-rate 0.6 --proj_dim 2048 2048; CUDA_VISIBLE_DEVICES=0,1,2,3 python linear_probe.py --pretrained logs/spectral-bs512/final.pth
    {"epoch": 99, "acc1": 64.574, "acc5": 86.094, "best_acc1": 64.588, "best_acc5": 86.138}

    CUDA_VISIBLE_DEVICES=4,5,6,7 python main.py --batch-size 256 --name spectral-bs256 --dist-port 8872 --mode spectral --learning-rate 0.3 --proj_dim 2048 2048; CUDA_VISIBLE_DEVICES=4,5,6,7 python linear_probe.py --pretrained logs/spectral-bs256/final.pth
    {"epoch": 99, "acc1": 62.956, "acc5": 85.17, "best_acc1": 62.956, "best_acc5": 85.188}

    srun python main.py --world-size $WORLD_SIZE --batch-size 4096 --name spectral-bs4096 --mode spectral --learning-rate 4.8 --proj_dim 2048 2048; python linear_probe.py --pretrained logs/spectral-bs4096/final.pth
    {"epoch": 99, "acc1": 66.834, "acc5": 87.828, "best_acc1": 66.836, "best_acc5": 87.848}

    python main.py --batch-size 2048 --name spectral-o4096 --dist-port 8872 --mode spectral --learning-rate 2.4 --proj_dim 4096 4096; python linear_probe.py --pretrained logs/spectral-o4096/final.pth
    {"epoch": 99, "acc1": 67.07, "acc5": 87.644, "best_acc1": 67.098, "best_acc5": 87.662}

    python main.py --batch-size 2048 --name spectral-o8192 --dist-port 8872 --mode spectral --learning-rate 1.2 --proj_dim 8192 8192; python linear_probe.py --pretrained logs/spectral-o8192/final.pth (tuned lr)
    Nan



--------------
python convert-pretrain-to-detectron2.py moco_v2_200ep_pretrain.pth.tar output_moco.pkl
python train_net.py --config-file configs/pascal_voc_R_50_C4_24k_moco.yaml --num-gpus 8 MODEL.WEIGHTS ./output_moco.pkl
  total_loss: 0.3019
  57.3856,82.2638,63.8503

python convert-pretrain-to-detectron2.py ../logs/neuralef-nosg-nolbn-o8192-e200/final.pth output.pkl
python train_net.py --config-file configs/pascal_voc_R_50_C4_24k_moco.yaml --num-gpus 8 MODEL.WEIGHTS ./output.pkl
  SOLVER.BASE_LR 0.2  23.5890,42.1724,22.7172
  SOLVER.BASE_LR 0.15 36.7445,63.8767,36.4257
  SOLVER.BASE_LR 0.12 51.7849,80.5773,56.2403
  SOLVER.BASE_LR 0.12 SOLVER.WEIGHT_DECAY 0.00001  38.2603,71.4469,36.1289
  SOLVER.BASE_LR 0.11 50.4533,79.7118,54.5017
  SOLVER.BASE_LR 0.1  49.1864,79.4234,52.2493
  SOLVER.BASE_LR 0.08 46.6194,77.5297,49.0326
  SOLVER.BASE_LR 0.05 37.8134,71.3366,34.9235
  SOLVER.BASE_LR 0.02 29.0656,61.3742,23.1111

python train_net.py --config-file configs/coco_R_50_C4_2x_moco.yaml --num-gpus 8 MODEL.WEIGHTS ./output.pkl
  SOLVER.BASE_LR 0.02
    copypaste: 36.0539,56.7731,38.4794,20.4815,41.0339,48.1511
    copypaste: 31.8637,53.0803,33.4913,13.1908,35.4890,48.8765
  SOLVER.BASE_LR 0.04
    copypaste: 39.7548,59.6628,43.1126,22.1209,44.6946,53.9395
    copypaste: 34.6995,56.4034,36.8821,15.3523,38.3663,52.5611
  SOLVER.BASE_LR 0.05
    copypaste: 39.9224,59.5558,43.4890,22.4730,45.0752,54.3234
    copypaste: 34.8912,56.3255,37.3862,15.5964,38.6231,52.7767
  SOLVER.BASE_LR 0.07
               39.6562,59.1954,42.8000,22.9854,44.7214,53.3161
               34.7156,56.0815,37.0469,15.5369,38.4260,51.5110
  SOLVER.BASE_LR 0.1
    copypaste: 39.1863,58.6099,42.6391,21.9717,43.9532,53.0947
    copypaste: 34.3331,55.3525,36.8232,15.4327,37.7376,51.3695


----------------------------

g45


CUDA_VISIBLE_DEVICES=2 python test_hashing.py --name neuralef-nosg-nolbn-o8192 --mode neuralef --proj_dim 8192 8192 --resume auto


CUDA_VISIBLE_DEVICES=0 python test_hashing.py --name neuralef-nolbn-o8192 --mode neuralef --proj_dim 8192 8192 --resume auto --dist-port 8873

CUDA_VISIBLE_DEVICES=1 python test_hashing.py --name neuralef-nolbn-o4096 --mode neuralef --proj_dim 4096 4096 --resume auto --dist-port 8874

CUDA_VISIBLE_DEVICES=2 python test_hashing.py --name neuralef-nosg-nolbn-o4096 --mode neuralef --proj_dim 4096 4096 --resume auto --dist-port 8875  --random_runs 10

CUDA_VISIBLE_DEVICES=3 python test_hashing.py --name spectral-o4096 --mode spectral --proj_dim 4096 4096 --resume auto --dist-port 8876  --random_runs 10


CUDA_VISIBLE_DEVICES=4 python test_hashing.py --name neuralef-nolbn-o8192 --mode neuralef --proj_dim 8192 8192 --resume auto --dist-port 8973

CUDA_VISIBLE_DEVICES=5 python test_hashing.py --name neuralef-nolbn-o4096 --mode neuralef --proj_dim 4096 4096 --resume auto --dist-port 8974

CUDA_VISIBLE_DEVICES=6 python test_hashing.py --name neuralef-nosg-nolbn-o4096 --mode neuralef --proj_dim 4096 4096 --resume auto --dist-port 8975  --random_runs 10

CUDA_VISIBLE_DEVICES=7 python test_hashing.py --name spectral-o4096 --mode spectral --proj_dim 4096 4096 --resume auto --dist-port 8976  --random_runs 10


----------the following not used -------------

python main_hash.py --batch-size 1920 --name hashing-our --dist-port 8873 --mode neuralef --learning-rate 2.25 --alpha 0.005 --proj_dim 4096 4096 --checkpoint-dir /home/zhijie/logs/ --epochs 50
k: 4  mAP: 0.4051  mean_P: 0.4012
   k: 8  mAP: 0.5285  mean_P: 0.5173
   k: 16  mAP: 0.6282  mean_P: 0.5878
   k: 32  mAP: 0.6700  mean_P: 0.6070
   k: 64  mAP: 0.6937  mean_P: 0.6176
   k: 128  mAP: 0.7103  mean_P: 0.6250
   k: 256  mAP: 0.7213  mean_P: 0.6339
   k: 512  mAP: 0.7282  mean_P: 0.6391
   k: 1024  mAP: 0.7323  mean_P: 0.6396
   k: 2048  mAP: 0.7333  mean_P: 0.6354
   k: 4096  mAP: 0.7299  mean_P: 0.6274

python main_hash.py --batch-size 1920 --name hashing-our-t30 --dist-port 8873 --mode neuralef --learning-rate 2.25 --alpha 0.005 --proj_dim 4096 4096 --checkpoint-dir /home/zhijie/logs/ --epochs 50 --t 30

python main_hash.py --batch-size 1920 --name hashing-our-t30-nsg --dist-port 8873 --mode neuralef --learning-rate 2.25 --alpha 0.005 --proj_dim 4096 4096 --checkpoint-dir /home/zhijie/logs/ --epochs 50 --t 30 --no_stop_grad

python main_hash.py --batch-size 1920 --name hashing-spectral --dist-port 8873 --mode spectral --learning-rate 2.25 --proj_dim 4096 4096 --epochs 50 --checkpoint-dir /workspace/home/zhijie/logs/ --data /workspace/home/fanbao/datasets/ImageNet --coco_dir /workspace/home/zhijie/train2014 --coco_db_path /workspace/home/zhijie/coco_DB.txt --coco_query_path /workspace/home/zhijie/coco_Query.txt



python main_hash.py --batch-size 1920 --name hashing-r50-t10 --dist-port 8873 --mode neuralef --learning-rate 2.25 --alpha 0.01 --proj_dim 2048 2048 --t 10 --checkpoint-dir /home/zhijie/logs/
     k: 4  mAP: 0.4535  mean_P: 0.4546
     k: 8  mAP: 0.6130  mean_P: 0.6051
     k: 16  mAP: 0.6753  mean_P: 0.6525
     k: 32  mAP: 0.7006  mean_P: 0.6665
     k: 64  mAP: 0.7139  mean_P: 0.6705
     k: 128  mAP: 0.7178  mean_P: 0.6694
     k: 256  mAP: 0.7169  mean_P: 0.6636
     k: 512  mAP: 0.7163  mean_P: 0.6586
     k: 1024  mAP: 0.7144  mean_P: 0.6498
     k: 2048  mAP: 0.7105  mean_P: 0.6376

     k: 4  mAP: 0.0390  mean_P: 0.0330
     k: 8  mAP: 0.1359  mean_P: 0.1282
     k: 16  mAP: 0.3570  mean_P: 0.3186
     k: 32  mAP: 0.4973  mean_P: 0.4193
     k: 64  mAP: 0.5462  mean_P: 0.4564
     k: 128  mAP: 0.5668  mean_P: 0.4770
     k: 256  mAP: 0.5721  mean_P: 0.4887
     k: 512  mAP: 0.5746  mean_P: 0.4959
     k: 1024  mAP: 0.5741  mean_P: 0.4967
     k: 2048  mAP: 0.5738  mean_P: 0.4961

     k: 4  mAP: 0.4472  mean_P: 0.4480
     k: 8  mAP: 0.5732  mean_P: 0.5551
     k: 16  mAP: 0.6482  mean_P: 0.5937
     k: 32  mAP: 0.6965  mean_P: 0.6113
     k: 64  mAP: 0.7127  mean_P: 0.6189
     k: 128  mAP: 0.7221  mean_P: 0.6256
     k: 256  mAP: 0.7294  mean_P: 0.6312
     k: 512  mAP: 0.7343  mean_P: 0.6294
     k: 1024  mAP: 0.7349  mean_P: 0.6238
     k: 2048  mAP: 0.7330  mean_P: 0.6152

python main_hash.py --batch-size 1920 --name hashing-r50-4 --dist-port 8873 --mode neuralef --learning-rate 2.25 --alpha 0.01 --proj_dim 2048 2048 --t 20 --checkpoint-dir /home/zhijie/logs/
     k: 4  mAP: 0.5197  mean_P: 0.5166
     k: 8  mAP: 0.6159  mean_P: 0.6065
     k: 16  mAP: 0.6748  mean_P: 0.6460
     k: 32  mAP: 0.7003  mean_P: 0.6584
     k: 64  mAP: 0.7071  mean_P: 0.6541
     k: 128  mAP: 0.7116  mean_P: 0.6492
     k: 256  mAP: 0.7103  mean_P: 0.6428
     k: 512  mAP: 0.7039  mean_P: 0.6318
     k: 1024  mAP: 0.6974  mean_P: 0.6163
     k: 2048  mAP: 0.6897  mean_P: 0.6008

     k: 4  mAP: 0.0523  mean_P: 0.0462
     k: 8  mAP: 0.1641  mean_P: 0.1550
     k: 16  mAP: 0.3865  mean_P: 0.3268
     k: 32  mAP: 0.5106  mean_P: 0.4171
     k: 64  mAP: 0.5507  mean_P: 0.4564
     k: 128  mAP: 0.5670  mean_P: 0.4754
     k: 256  mAP: 0.5738  mean_P: 0.4848
     k: 512  mAP: 0.5769  mean_P: 0.4879
     k: 1024  mAP: 0.5769  mean_P: 0.4861
     k: 2048  mAP: 0.5750  mean_P: 0.4756

     k: 4  mAP: 0.4719  mean_P: 0.4709
     k: 8  mAP: 0.5907  mean_P: 0.5710
     k: 16  mAP: 0.6535  mean_P: 0.5923
     k: 32  mAP: 0.6903  mean_P: 0.6028
     k: 64  mAP: 0.7084  mean_P: 0.6136
     k: 128  mAP: 0.7200  mean_P: 0.6183
     k: 256  mAP: 0.7257  mean_P: 0.6162
     k: 512  mAP: 0.7248  mean_P: 0.6079
     k: 1024  mAP: 0.7173  mean_P: 0.5897
     k: 2048  mAP: 0.7104  mean_P: 0.5711

     best see plot

python main_hash.py --batch-size 2050 --name hashing-r50-5 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --t 50 --no_last_bn --checkpoint-dir /workspace/home/zhijie/logs/ --data /workspace/home/fanbao/datasets/ImageNet --coco_dir /workspace/home/zhijie/train2014 --coco_db_path /workspace/home/zhijie/coco_DB.txt --coco_query_path /workspace/home/zhijie/coco_Query.txt

python main_hash.py --batch-size 2050 --name hashing-r50-3 --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.03 --proj_dim 2048 2048 --t 30 --checkpoint-dir /workspace/home/zhijie/logs/ --data /workspace/home/fanbao/datasets/ImageNet --coco_dir /workspace/home/zhijie/train2014 --coco_db_path /workspace/home/zhijie/coco_DB.txt --coco_query_path /workspace/home/zhijie/coco_Query.txt
     k: 4  mAP: 0.4924  mean_P: 0.4895
     k: 8  mAP: 0.6243  mean_P: 0.6143
     k: 16  mAP: 0.6980  mean_P: 0.6691
     k: 32  mAP: 0.7210  mean_P: 0.6801
     k: 64  mAP: 0.7265  mean_P: 0.6749
     k: 128  mAP: 0.7271  mean_P: 0.6664
     k: 256  mAP: 0.7228  mean_P: 0.6576
     k: 512  mAP: 0.7151  mean_P: 0.6409
     k: 1024  mAP: 0.7050  mean_P: 0.6174
     k: 2048  mAP: 0.6987  mean_P: 0.5973

     k: 4  mAP: 0.0544  mean_P: 0.0478
     k: 8  mAP: 0.1672  mean_P: 0.1533
     k: 16  mAP: 0.3976  mean_P: 0.3347
     k: 32  mAP: 0.4953  mean_P: 0.3964
     k: 64  mAP: 0.5352  mean_P: 0.4350
     k: 128  mAP: 0.5589  mean_P: 0.4595
     k: 256  mAP: 0.5681  mean_P: 0.4727
     k: 512  mAP: 0.5739  mean_P: 0.4782
     k: 1024  mAP: 0.5742  mean_P: 0.4652
     k: 2048  mAP: 0.5688  mean_P: 0.4264

     k: 4  mAP: 0.4729  mean_P: 0.4671
     k: 8  mAP: 0.5797  mean_P: 0.5628
     k: 16  mAP: 0.6548  mean_P: 0.6019
     k: 32  mAP: 0.6910  mean_P: 0.6115
     k: 64  mAP: 0.7147  mean_P: 0.6183
     k: 128  mAP: 0.7236  mean_P: 0.6183
     k: 256  mAP: 0.7278  mean_P: 0.6105
     k: 512  mAP: 0.7227  mean_P: 0.5922
     k: 1024  mAP: 0.7135  mean_P: 0.5635
     k: 2048  mAP: 0.7038  mean_P: 0.5399

python main_hash.py --batch-size 2024 --name temp --dist-port 8873 --mode neuralef --learning-rate 2.4 --alpha 0.01 --proj_dim 2048 2048 --checkpoint-dir /home/zhijie/logs --t 30 --resume auto
 k: 4  mAP: 0.4429  mean_P: 0.4426
 k: 8  mAP: 0.6115  mean_P: 0.6006
 k: 16  mAP: 0.6681  mean_P: 0.6392
 k: 32  mAP: 0.6923  mean_P: 0.6476
 k: 64  mAP: 0.7013  mean_P: 0.6499
 k: 128  mAP: 0.6997  mean_P: 0.6372
 k: 256  mAP: 0.6967  mean_P: 0.6278
 k: 512  mAP: 0.6919  mean_P: 0.6173
 k: 1024  mAP: 0.6827  mean_P: 0.5989
 k: 2048  mAP: 0.6722  mean_P: 0.5793

 k: 4  mAP: 0.0493  mean_P: 0.0430
 k: 8  mAP: 0.1739  mean_P: 0.1627
 k: 16  mAP: 0.4143  mean_P: 0.3433
 k: 32  mAP: 0.5184  mean_P: 0.4230
 k: 64  mAP: 0.5547  mean_P: 0.4564
 k: 128  mAP: 0.5708  mean_P: 0.4776
 k: 256  mAP: 0.5742  mean_P: 0.4840
 k: 512  mAP: 0.5833  mean_P: 0.4907
 k: 1024  mAP: 0.5825  mean_P: 0.4872
 k: 2048  mAP: 0.5813  mean_P: 0.4679

 k: 4  mAP: 0.4917  mean_P: 0.4955
 k: 8  mAP: 0.5824  mean_P: 0.5631
 k: 16  mAP: 0.6622  mean_P: 0.5980
 k: 32  mAP: 0.6945  mean_P: 0.6057
 k: 64  mAP: 0.7116  mean_P: 0.6124
 k: 128  mAP: 0.7202  mean_P: 0.6122
 k: 256  mAP: 0.7223  mean_P: 0.6047
 k: 512  mAP: 0.7184  mean_P: 0.5932
 k: 1024  mAP: 0.7081  mean_P: 0.5711
 k: 2048  mAP: 0.6973  mean_P: 0.5438

python main_hash.py --batch-size 2024 --name hashing-r50-spectral --dist-port 8873 --mode spectral --learning-rate 2.4 --proj_dim 2048 2048 --checkpoint-dir /home/zhijie/logs --resume auto
  k: 4  mAP: 0.4298  mean_P: 0.4289
  k: 8  mAP: 0.5324  mean_P: 0.4974
  k: 16  mAP: 0.6459  mean_P: 0.5976
  k: 32  mAP: 0.7178  mean_P: 0.6604
  k: 64  mAP: 0.7511  mean_P: 0.6979
  k: 128  mAP: 0.7685  mean_P: 0.7239
  k: 256  mAP: 0.7735  mean_P: 0.7332
  k: 512  mAP: 0.7764  mean_P: 0.7387
  k: 1024  mAP: 0.7786  mean_P: 0.7414
  k: 2048  mAP: 0.7798  mean_P: 0.7434

  k: 4  mAP: 0.0509  mean_P: 0.0449
  k: 8  mAP: 0.1784  mean_P: 0.1477
  k: 16  mAP: 0.3512  mean_P: 0.2560
  k: 32  mAP: 0.4392  mean_P: 0.3353
  k: 64  mAP: 0.4782  mean_P: 0.3816
  k: 128  mAP: 0.4962  mean_P: 0.4012
  k: 256  mAP: 0.5062  mean_P: 0.4122
  k: 512  mAP: 0.5084  mean_P: 0.4142
  k: 1024  mAP: 0.5110  mean_P: 0.4163
  k: 2048  mAP: 0.5123  mean_P: 0.4175

  k: 4  mAP: 0.4467  mean_P: 0.4421
  k: 8  mAP: 0.5444  mean_P: 0.4975
  k: 16  mAP: 0.6276  mean_P: 0.5489
  k: 32  mAP: 0.6874  mean_P: 0.5937
  k: 64  mAP: 0.7199  mean_P: 0.6302
  k: 128  mAP: 0.7327  mean_P: 0.6459
  k: 256  mAP: 0.7371  mean_P: 0.6529
  k: 512  mAP: 0.7378  mean_P: 0.6548
  k: 1024  mAP: 0.7398  mean_P: 0.6570
  k: 2048  mAP: 0.7401  mean_P: 0.6576
